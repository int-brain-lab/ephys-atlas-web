# IBL ephys atlas web app

## Running locally

1. Clone the repository.
2. Put the following data files in `data/` (can be generated with the `tools/process.py` script):

```
    data/features.json              # contains all feature values
    data/slices.json                # contains all SVG data (Allen brain atlas slices)

    data/region_colors.css          # contains the Allen atlas region colors

    data/regions_psd_alpha.css      # generated by the Python processing script
    data/regions_psd_beta.css       # one CSS file per feature
    data/regions_psd_delta.css      # ...
    data/regions_psd_gamma.css
    data/regions_psd_theta.css
    data/regions_rms_ap.css
    data/regions_rms_lf.css
    data/regions_spike_rate.css
```
3. Run `./run.sh`


## Deployment

Apache configuration file, for example `/etc/apache2/sites-available/ephysatlas.conf`:

```
<VirtualHost *:80>
    ServerAdmin admin@internationalbrainlab.org
    ServerName ephysatlas.internationalbrainlab.org
    DocumentRoot /path/to/ephys-atlas-web
    AddOutputFilterByType DEFLATE application/javascript application/json
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
```
